<!doctype html>
<html ng-app="invoices">
<head>
    <title>Invoices</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="//localhost:8080/auth/js/keycloak.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
    <script src="https://code.angularjs.org/1.5.0/angular-route.js"></script>

    <script src="js/invoices.js"></script>
</head>

<body ng-controller="Invoices">

<table class="table table-striped">
    <thead>
    <tr>
        <th scope="col">Id</th>
        <th scope="col">Number</th>
        <th scope="col">Seller</th>
        <th scope="col">Buyer</th>
        <th scope="col">Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="invoice in invoices">
        <td>{{invoice.id}}</td>
        <td>{{invoice.number}}</td>
        <td>{{invoice.seller.name}}</td>
        <td>{{invoice.buyer.name}}</td>
        <td>
            <div class="modal fade" id="invoiceModal{{invoice.id}}" tabindex="-1" role="dialog" aria-labelledby="invoiceModal{{invoice.id}}Label" aria-hidden="true">
                <div class="modal-dialog modal-xl" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="invoiceModal{{invoice.id}}Label">Invoice number: {{invoice.number}}</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <table class="table-sm">
                                <tbody>
                                <tr>
                                    <td scope="col"></td>
                                    <td scope="col">Name:</td>
                                    <td scope="col">Address:</td>
                                    <td scope="col">Tax id:</td>
                                    <td scope="col">Account number:</td>
                                    <td scope="col">Phone number:</td>
                                    <td scope="col">E-mail:</td>
                                </tr>
                                <tr>
                                    <td class="bg-primary"><p class="text-center text-white font-weight-bold">Seller</p></td>
                                    <td><h6>{{invoice.seller.name}}</h6></td>
                                    <td><h6>{{invoice.seller.address}}</h6></td>
                                    <td><h6>{{invoice.seller.taxId}}</h6></td>
                                    <td><h6>{{invoice.seller.accountNumber}}</h6></td>
                                    <td><h6>{{invoice.seller.phoneNumber}}</h6></td>
                                    <td><h6>{{invoice.seller.email}}</h6></td>
                                </tr>
                                <tr>
                                    <td class="bg-primary"><p class="text-center text-white font-weight-bold">Buyer</p></td>
                                    <td><h6>{{invoice.buyer.name}}</h6></td>
                                    <td><h6>{{invoice.buyer.address}}</h6></td>
                                    <td><h6>{{invoice.buyer.taxId}}</h6></td>
                                    <td><h6>{{invoice.buyer.accountNumber}}</h6></td>
                                    <td><h6>{{invoice.buyer.phoneNumber}}</h6></td>
                                    <td><h6>{{invoice.buyer.email}}</h6></td>
                                </tr>
                                </tbody>
                            </table>
                            <p></p>
                            <table class="table">
                                <tr>
                                    <th scope="col">Product/Service name:</th>
                                    <th scope="col">Quantity:</th>
                                    <th scope="col">Price:</th>
                                    <th scope="col">Vat rate:</th>
                                    <th scope="col">Vat value:</th>
                                    <th scope="col">Gross value:</th>
                                </tr>
                                <tr ng-repeat="entry in invoice.entries">
                                    <td>{{entry.description}}</td>
                                    <td>{{entry.quantity}}</td>
                                    <td>{{entry.price}}</td>
                                    <td>{{entry.vatRate}}</td>
                                    <td>{{entry.netValue}}</td>
                                    <td>{{entry.grossValue}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#invoiceModal{{invoice.id}}">Show details</button>
            <button type="button" class="btn btn-danger" ng-click="pdf(invoice.id)">PDF</button>
            <button type="button" class="btn btn-dark" ng-click="delete(invoice.id)">Delete</button>
        </td>
    </tr>
    </tbody>
</table>
</body>
</html>
